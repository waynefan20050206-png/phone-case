<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Account - CaseCraft</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <a href="index.html" class="text-2xl font-bold">
                    <span class="text-gray-900">Case</span>
                    <span class="text-orange-500">Craft</span>
                </a>

                <!-- Right Icons -->
                <div class="flex items-center gap-4">
                    <button class="relative" onclick="window.location.href='cart.html'">
                        <i class="fas fa-shopping-cart text-gray-700 text-xl"></i>
                        <span class="cart-badge">3</span>
                    </button>
                    <button>
                        <i class="fas fa-user text-gray-700 text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Profile Content -->
    <main class="container py-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">My Account</h1>
            <p class="text-gray-600 mt-1">Manage your profile and orders</p>
        </div>

        <div class="grid lg:grid-cols-4 gap-6">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <div class="card">
                    <div class="p-6">
                        <!-- Profile Picture -->
                        <div class="relative w-24 h-24 mx-auto mb-4">
                            <div class="w-full h-full rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center text-white text-3xl font-bold" 
                                 id="profile-initial">
                                J
                            </div>
                            <button class="absolute bottom-0 right-0 w-8 h-8 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50">
                                <i class="fas fa-camera text-gray-600"></i>
                            </button>
                        </div>

                        <div class="text-center mb-6">
                            <h3 class="font-bold text-gray-900" id="profile-name">John Doe</h3>
                            <p class="text-sm text-gray-500" id="profile-email">john.doe@example.com</p>
                        </div>

                        <!-- Quick Stats -->
                        <div class="grid grid-cols-2 gap-3 mb-6">
                            <div class="text-center p-3 bg-gray-50 rounded-xl">
                                <i class="fas fa-shopping-bag text-orange-500 text-lg mb-1"></i>
                                <p class="text-xl font-bold text-gray-900">12</p>
                                <p class="text-xs text-gray-500">Orders</p>
                            </div>
                            <div class="text-center p-3 bg-gray-50 rounded-xl">
                                <i class="fas fa-heart text-orange-500 text-lg mb-1"></i>
                                <p class="text-xl font-bold text-gray-900">8</p>
                                <p class="text-xs text-gray-500">Wishlist</p>
                            </div>
                        </div>

                        <!-- Logout Button -->
                        <button class="btn btn-outline w-full" onclick="logout()">
                            <i class="fas fa-sign-out-alt mr-2"></i> Logout
                        </button>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="lg:col-span-3">
                <!-- Tabs -->
                <div class="tabs mb-6">
                    <button class="tab active" onclick="switchTab('profile')">
                        <i class="fas fa-user mr-2"></i> Profile
                    </button>
                    <button class="tab" onclick="switchTab('orders')">
                        <i class="fas fa-shopping-bag mr-2"></i> Orders
                    </button>
                    <button class="tab" onclick="switchTab('wishlist')">
                        <i class="fas fa-heart mr-2"></i> Wishlist
                    </button>
                    <button class="tab" onclick="switchTab('settings')">
                        <i class="fas fa-cog mr-2"></i> Settings
                    </button>
                </div>

                <!-- Profile Tab -->
                <div id="profile-tab" class="tab-content">
                    <div class="card">
                        <div class="p-6">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-xl font-bold text-gray-900">Personal Information</h2>
                                <div class="flex gap-2">
                                    <button class="btn btn-outline" onclick="cancelEdit()" id="cancel-btn" style="display: none;">
                                        Cancel
                                    </button>
                                    <button class="btn btn-primary" onclick="toggleEdit()" id="edit-btn">
                                        Edit Profile
                                    </button>
                                </div>
                            </div>

                            <form class="space-y-5" id="profile-form">
                                <!-- Full Name -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Full Name</label>
                                    <div class="relative">
                                        <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="text" 
                                               class="input pl-12" 
                                               id="name-input"
                                               value="John Doe"
                                               disabled>
                                    </div>
                                </div>

                                <!-- Email -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Email Address</label>
                                    <div class="relative">
                                        <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="email" 
                                               class="input pl-12" 
                                               id="email-input"
                                               value="john.doe@example.com"
                                               disabled>
                                    </div>
                                </div>

                                <!-- Phone -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Phone Number</label>
                                    <div class="relative">
                                        <i class="fas fa-phone absolute left-4 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                        <input type="tel" 
                                               class="input pl-12" 
                                               id="phone-input"
                                               value="+1 (555) 123-4567"
                                               disabled>
                                    </div>
                                </div>

                                <!-- Address -->
                                <div>
                                    <label class="block text-sm font-semibold text-gray-700 mb-2">Address</label>
                                    <div class="relative">
                                        <i class="fas fa-map-marker-alt absolute left-4 top-4 text-gray-400"></i>
                                        <input type="text" 
                                               class="input pl-12" 
                                               id="address-input"
                                               value="123 Main Street, New York, NY 10001"
                                               disabled>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div id="orders-tab" class="tab-content hidden">
                    <div class="card">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-900 mb-6">Order History</h2>
                            <div class="space-y-4">
                                <!-- Order 1 -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:border-gray-300">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-3 mb-2">
                                            <p class="font-semibold text-gray-900">Order #1001</p>
                                            <span class="badge badge-green">Delivered</span>
                                        </div>
                                        <p class="text-sm text-gray-500">2024-01-15 · 1 item</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-gray-900">$24.99</p>
                                        <button class="text-orange-500 hover:text-orange-600 text-sm font-medium mt-1" 
                                                onclick="viewOrderDetails(1001)">
                                            View Details
                                        </button>
                                    </div>
                                </div>

                                <!-- Order 2 -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl hover:border-gray-300">
                                    <div class="flex-1">
                                        <div class="flex items-center gap-3 mb-2">
                                            <p class="font-semibold text-gray-900">Order #1002</p>
                                            <span class="badge" style="background-color: #dbeafe; color: #1e40af;">In Transit</span>
                                        </div>
                                        <p class="text-sm text-gray-500">2024-01-10 · 2 items</p>
                                    </div>
                                    <div class="text-right">
                                        <p class="font-bold text-gray-900">$54.98</p>
                                        <button class="text-orange-500 hover:text-orange-600 text-sm font-medium mt-1"
                                                onclick="viewOrderDetails(1002)">
                                            View Details
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Wishlist Tab -->
                <div id="wishlist-tab" class="tab-content hidden">
                    <div class="card">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-900 mb-6">My Wishlist</h2>
                            <div class="text-center py-12">
                                <i class="fas fa-heart text-gray-300 text-5xl mb-4"></i>
                                <h3 class="text-lg font-semibold text-gray-900 mb-2">Your wishlist is empty</h3>
                                <p class="text-gray-500 mb-4">Save your favorite items for later</p>
                                <a href="index.html" class="btn btn-primary">Browse Products</a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settings-tab" class="tab-content hidden">
                    <div class="card">
                        <div class="p-6">
                            <h2 class="text-xl font-bold text-gray-900 mb-6">Account Settings</h2>
                            <div class="space-y-4">
                                <!-- Notification Settings -->
                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl">
                                    <div>
                                        <p class="font-semibold text-gray-900">Email Notifications</p>
                                        <p class="text-sm text-gray-500">Receive updates about your orders</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div class="flex items-center justify-between p-4 border border-gray-200 rounded-xl">
                                    <div>
                                        <p class="font-semibold text-gray-900">Marketing Emails</p>
                                        <p class="text-sm text-gray-500">Get exclusive deals and offers</p>
                                    </div>
                                    <label class="switch">
                                        <input type="checkbox">
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <!-- Change Password -->
                                <button class="btn btn-outline w-full" onclick="changePassword()">
                                    Change Password
                                </button>

                                <!-- Delete Account -->
                                <button class="btn btn-outline w-full text-red-600 border-red-200 hover:bg-red-50" 
                                        onclick="deleteAccount()">
                                    Delete Account
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-12 border-t border-gray-200 py-8">
        <div class="container text-center">
            <p class="text-gray-500 text-sm">
                © 2025 CaseCraft. Team 13 Project-Chenwei Fan, Andrew Lin, HsuanLu Yang.
            </p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        let isEditing = false;
        let originalProfile = {};

        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(`${tabName}-tab`).classList.remove('hidden');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        function toggleEdit() {
            const inputs = document.querySelectorAll('#profile-form input');
            const editBtn = document.getElementById('edit-btn');
            const cancelBtn = document.getElementById('cancel-btn');

            if (!isEditing) {
                // Start editing
                isEditing = true;
                originalProfile = {
                    name: document.getElementById('name-input').value,
                    email: document.getElementById('email-input').value,
                    phone: document.getElementById('phone-input').value,
                    address: document.getElementById('address-input').value
                };

                inputs.forEach(input => input.disabled = false);
                editBtn.textContent = 'Save Profile';
                editBtn.classList.add('bg-green-500', 'hover:bg-green-600');
                cancelBtn.style.display = 'block';
            } else {
                // Save changes
                isEditing = false;
                
                // Update profile display
                const name = document.getElementById('name-input').value;
                document.getElementById('profile-name').textContent = name;
                document.getElementById('profile-initial').textContent = name.charAt(0);
                document.getElementById('profile-email').textContent = document.getElementById('email-input').value;

                inputs.forEach(input => input.disabled = true);
                editBtn.textContent = 'Edit Profile';
                editBtn.classList.remove('bg-green-500', 'hover:bg-green-600');
                cancelBtn.style.display = 'none';

                Toast.show('Profile updated successfully!', 'success');
            }
        }

        function cancelEdit() {
            isEditing = false;
            
            // Restore original values
            document.getElementById('name-input').value = originalProfile.name;
            document.getElementById('email-input').value = originalProfile.email;
            document.getElementById('phone-input').value = originalProfile.phone;
            document.getElementById('address-input').value = originalProfile.address;

            const inputs = document.querySelectorAll('#profile-form input');
            inputs.forEach(input => input.disabled = true);
            
            document.getElementById('edit-btn').textContent = 'Edit Profile';
            document.getElementById('edit-btn').classList.remove('bg-green-500', 'hover:bg-green-600');
            document.getElementById('cancel-btn').style.display = 'none';
        }

        function logout() {
            Toast.show('Logged out successfully', 'success');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1000);
        }

        function viewOrderDetails(orderId) {
            Toast.show(`Viewing order #${orderId}`, 'info');
        }

        function changePassword() {
            Toast.show('Password change form will open', 'info');
        }

        function deleteAccount() {
            if (confirm('Are you sure you want to delete your account? This action cannot be undone.')) {
                Toast.show('Account deletion confirmed', 'info');
            }
        }

        // 添加切換開關的樣式
        const style = document.createElement('style');
        style.textContent = `
            .switch {
                position: relative;
                display: inline-block;
                width: 60px;
                height: 34px;
            }
            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }
            .slider {
                position: absolute;
                cursor: pointer;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background-color: #ccc;
                transition: .4s;
                border-radius: 34px;
            }
            .slider:before {
                position: absolute;
                content: "";
                height: 26px;
                width: 26px;
                left: 4px;
                bottom: 4px;
                background-color: white;
                transition: .4s;
                border-radius: 50%;
            }
            input:checked + .slider {
                background-color: #f97316;
            }
            input:checked + .slider:before {
                transform: translateX(26px);
            }
        `;
        document.head.appendChild(style);

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            CartManager.updateBadge();
        });
    </script>
</body>
</html>