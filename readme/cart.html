<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - CaseCraft</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <a href="index.html" class="text-2xl font-bold">
                    <span class="text-gray-900">Case</span>
                    <span class="text-orange-500">Craft</span>
                </a>

                <!-- Right Icons -->
                <div class="flex items-center gap-4">
                    <button class="relative">
                        <i class="fas fa-shopping-cart text-gray-700 text-xl"></i>
                        <span class="cart-badge">3</span>
                    </button>
                    <button onclick="window.location.href='profile.html'">
                        <i class="fas fa-user text-gray-700 text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Cart Content -->
    <main class="container py-8">
        <!-- Header -->
        <div class="mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">Shopping Cart</h1>
            <p class="text-gray-600">2 items in your cart</p>
        </div>

        <!-- Empty Cart State (hidden by default) -->
        <div id="empty-cart" class="hidden text-center py-20">
            <i class="fas fa-shopping-bag text-gray-300 text-6xl mb-6"></i>
            <h2 class="text-3xl font-bold text-gray-900 mb-3">Your cart is empty</h2>
            <p class="text-gray-600 mb-8">Add some amazing cases to get started!</p>
            <a href="index.html" class="btn btn-primary px-8 py-3">
                Start Shopping
            </a>
        </div>

        <!-- Cart Items (shown by default) -->
        <div id="cart-items" class="grid lg:grid-cols-3 gap-8">
            <!-- Items List -->
            <div class="lg:col-span-2 space-y-4">
                <!-- Item 1 -->
                <div class="card p-4">
                    <div class="flex gap-4">
                        <!-- Image -->
                        <div class="w-24 h-24 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0">
                            <img src="https://images.unsplash.com/photo-1601784551446-20c9e07cdbdb?w=200&q=80" 
                                 alt="Midnight Marble" 
                                 class="w-full h-full object-cover">
                        </div>

                        <!-- Details -->
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-gray-900 text-lg mb-1">Midnight Marble</h3>
                                    <span class="badge badge-gray text-xs">iPhone 15 Pro</span>
                                </div>
                                <button class="text-gray-400 hover:text-red-500" onclick="removeItem(1)">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>

                            <div class="flex items-center justify-between mt-4">
                                <!-- Quantity Controls -->
                                <div class="flex items-center border border-gray-200 rounded-lg">
                                    <button class="p-2 hover:bg-gray-50" onclick="updateQuantity(1, -1)">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                    <span class="px-4 py-2 font-medium quantity-display" data-item="1">2</span>
                                    <button class="p-2 hover:bg-gray-50" onclick="updateQuantity(1, 1)">
                                        <i class="fas fa-plus text-gray-600"></i>
                                    </button>
                                </div>

                                <!-- Price -->
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">$24.99 each</p>
                                    <p class="text-xl font-bold text-gray-900">$49.98</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Item 2 -->
                <div class="card p-4">
                    <div class="flex gap-4">
                        <div class="w-24 h-24 rounded-xl overflow-hidden bg-gray-100 flex-shrink-0">
                            <img src="https://images.unsplash.com/photo-1592899677977-9c10ca588bbd?w=200&q=80" 
                                 alt="Ocean Breeze Clear" 
                                 class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h3 class="font-bold text-gray-900 text-lg mb-1">Ocean Breeze Clear</h3>
                                    <span class="badge badge-gray text-xs">iPhone 14</span>
                                </div>
                                <button class="text-gray-400 hover:text-red-500" onclick="removeItem(2)">
                                    <i class="fas fa-trash-alt"></i>
                                </button>
                            </div>
                            <div class="flex items-center justify-between mt-4">
                                <div class="flex items-center border border-gray-200 rounded-lg">
                                    <button class="p-2 hover:bg-gray-50" onclick="updateQuantity(2, -1)">
                                        <i class="fas fa-minus text-gray-600"></i>
                                    </button>
                                    <span class="px-4 py-2 font-medium quantity-display" data-item="2">1</span>
                                    <button class="p-2 hover:bg-gray-50" onclick="updateQuantity(2, 1)">
                                        <i class="fas fa-plus text-gray-600"></i>
                                    </button>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500">$19.99 each</p>
                                    <p class="text-xl font-bold text-gray-900">$19.99</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Continue Shopping -->
                <a href="index.html" class="btn btn-outline w-full">
                    <i class="fas fa-arrow-left mr-2"></i> Continue Shopping
                </a>
            </div>

            <!-- Order Summary -->
            <div class="lg:col-span-1">
                <div class="card p-6 sticky top-6">
                    <h2 class="text-xl font-bold text-gray-900 mb-6">Order Summary</h2>

                    <!-- Promo Code -->
                    <div class="mb-6">
                        <label class="block text-sm font-semibold text-gray-700 mb-2">
                            <i class="fas fa-tag mr-2"></i> Promo Code
                        </label>
                        <div class="flex gap-2">
                            <input type="text" 
                                   placeholder="Enter code" 
                                   class="input flex-1" 
                                   id="promo-code">
                            <button class="btn btn-outline" onclick="applyPromo()">Apply</button>
                        </div>
                    </div>

                    <!-- Price Breakdown -->
                    <div class="space-y-3 mb-6 pb-6 border-b border-gray-200">
                        <div class="flex justify-between text-gray-600">
                            <span>Subtotal</span>
                            <span class="font-medium" id="subtotal">$69.97</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Shipping</span>
                            <span class="font-medium" id="shipping">$5.99</span>
                        </div>
                        <div class="flex justify-between text-gray-600">
                            <span>Tax</span>
                            <span class="font-medium" id="tax">$5.60</span>
                        </div>
                    </div>

                    <!-- Total -->
                    <div class="flex justify-between items-center mb-6">
                        <span class="text-lg font-bold text-gray-900">Total</span>
                        <span class="text-2xl font-bold text-gray-900" id="total">$81.56</span>
                    </div>

                    <!-- Checkout Button -->
                    <button class="btn btn-primary w-full py-4" onclick="checkout()">
                        Proceed to Checkout
                        <i class="fas fa-arrow-right ml-2"></i>
                    </button>

                    <!-- Free Shipping Notice -->
                    <p class="text-center text-sm text-gray-500 mt-4" id="shipping-notice">
                        Add $30.03 more for free shipping! üöö
                    </p>

                    <!-- Trust Badges -->
                    <div class="mt-6 pt-6 border-t border-gray-200 space-y-2">
                        <div class="flex items-center gap-2 text-sm text-gray-600">
                            <i class="fas fa-check-circle text-green-500"></i>
                            Secure checkout
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-600">
                            <i class="fas fa-check-circle text-green-500"></i>
                            30-day returns
                        </div>
                        <div class="flex items-center gap-2 text-sm text-gray-600">
                            <i class="fas fa-check-circle text-green-500"></i>
                            Free shipping over $50
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="mt-12 border-t border-gray-200 py-8">
        <div class="container text-center">
            <p class="text-gray-500 text-sm">
                ¬© 2025 CaseCraft. Team 13 Project-Chenwei Fan, Andrew Lin, HsuanLu Yang.
            </p>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
        let cartItems = [
            { id: 1, name: 'Midnight Marble', price: 24.99, quantity: 2 },
            { id: 2, name: 'Ocean Breeze Clear', price: 19.99, quantity: 1 }
        ];

        function calculateTotals() {
            const subtotal = cartItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 50 ? 0 : 5.99;
            const tax = subtotal * 0.08;
            const total = subtotal + shipping + tax;

            document.getElementById('subtotal').textContent = `$${subtotal.toFixed(2)}`;
            document.getElementById('shipping').textContent = shipping === 0 ? 'FREE' : `$${shipping.toFixed(2)}`;
            document.getElementById('tax').textContent = `$${tax.toFixed(2)}`;
            document.getElementById('total').textContent = `$${total.toFixed(2)}`;

            // Update shipping notice
            if (subtotal < 50) {
                const needed = (50 - subtotal).toFixed(2);
                document.getElementById('shipping-notice').textContent = 
                    `Add $${needed} more for free shipping! üöö`;
            } else {
                document.getElementById('shipping-notice').innerHTML = 
                    '<span class="text-green-600">üéâ You qualify for free shipping!</span>';
            }

            // Update cart badge
            const totalItems = cartItems.reduce((sum, item) => sum + item.quantity, 0);
            CartManager.updateBadge();
        }

        function updateQuantity(itemId, delta) {
            const item = cartItems.find(item => item.id === itemId);
            if (item) {
                item.quantity = Math.max(1, item.quantity + delta);
                document.querySelector(`[data-item="${itemId}"]`).textContent = item.quantity;
                calculateTotals();
            }
        }

        function removeItem(itemId) {
            cartItems = cartItems.filter(item => item.id !== itemId);
            
            if (cartItems.length === 0) {
                document.getElementById('cart-items').classList.add('hidden');
                document.getElementById('empty-cart').classList.remove('hidden');
            } else {
                const itemElement = document.querySelector(`[data-item="${itemId}"]`).closest('.card');
                itemElement.remove();
            }
            
            calculateTotals();
            Toast.show('Item removed from cart', 'info');
        }

        function applyPromo() {
            const code = document.getElementById('promo-code').value;
            if (code.toLowerCase() === 'save10') {
                Toast.show('Promo code applied! 10% discount', 'success');
            } else {
                Toast.show('Invalid promo code', 'error');
            }
        }

        function checkout() {
            Toast.show('Proceeding to checkout...', 'success');
            setTimeout(() => {
                // ÈÄôË£°ÂèØ‰ª•ÈáçÂÆöÂêëÂà∞ÁµêÂ∏≥È†ÅÈù¢
                window.location.href = 'checkout.html';
            }, 1000);
        }

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            calculateTotals();
            CartManager.updateBadge();
        });
    </script>
</body>
</html>